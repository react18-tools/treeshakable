<!DOCTYPE html><html class="default" lang="en" data-base="./"><head><meta charset="utf-8"/><meta http-equiv="x-ua-compatible" content="IE=edge"/><title>React18 Loaders</title><meta name="description" content="Documentation for React18 Loaders"/><meta name="viewport" content="width=device-width, initial-scale=1"/><link rel="stylesheet" href="assets/style.css"/><link rel="stylesheet" href="assets/highlight.css"/><script defer src="assets/main.js"></script><script async src="assets/icons.js" id="tsd-icons-script"></script><script async src="assets/search.js" id="tsd-search-script"></script><script async src="assets/navigation.js" id="tsd-nav-script"></script></head><body><script>document.documentElement.dataset.theme = localStorage.getItem("tsd-theme") || "os";document.body.style.display="none";setTimeout(() => window.app?app.showPage():document.body.style.removeProperty("display"),500)</script><header class="tsd-page-toolbar"><div class="tsd-toolbar-contents container"><a href="index.html" class="title">React18 Loaders</a><div id="tsd-toolbar-links"></div><button id="tsd-search-trigger" class="tsd-widget" aria-label="Search"><svg width="16" height="16" viewBox="0 0 16 16" fill="none" aria-hidden="true"><use href="assets/icons.svg#icon-search"></use></svg></button><dialog id="tsd-search" aria-label="Search"><input role="combobox" id="tsd-search-input" aria-controls="tsd-search-results" aria-autocomplete="list" aria-expanded="true" autocapitalize="off" autocomplete="off" placeholder="Search the docs" maxLength="100"/><ul role="listbox" id="tsd-search-results"></ul><div id="tsd-search-status" aria-live="polite" aria-atomic="true"><div>Preparing search index...</div></div></dialog><a href="#" class="tsd-widget menu" id="tsd-toolbar-menu-trigger" data-toggle="menu" aria-label="Menu"><svg width="16" height="16" viewBox="0 0 16 16" fill="none" aria-hidden="true"><use href="assets/icons.svg#icon-menu"></use></svg></a></div></header><div class="container container-main"><div class="col-content"><div class="tsd-page-title"><h1>React18 Loaders</h1></div><div class="tsd-panel tsd-typography"><h1 id="treeshakable-" class="tsd-anchor-link">Treeshakable <img src="https://github.com/react18-tools/treeshakable/blob/main/popper.png?raw=true" style="height: 40px"/><a href="#treeshakable-" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h1><p><a href="https://github.com/react18-tools/treeshakable/actions/workflows/test.yml"><img src="https://github.com/react18-tools/treeshakable/actions/workflows/test.yml/badge.svg" alt="test"></a> <a href="https://codeclimate.com/github/react18-tools/treeshakable/maintainability"><img src="https://api.codeclimate.com/v1/badges/fa9dc6dd9d9afeeca32d/maintainability" alt="Maintainability"></a> <a href="https://codecov.io/gh/react18-tools/treeshakable"><img src="https://codecov.io/gh/react18-tools/treeshakable/graph/badge.svg" alt="codecov"></a> <a href="https://www.npmjs.com/package/treeshakable"><img src="https://img.shields.io/npm/v/treeshakable.svg?colorB=green" alt="Version"></a> <a href="https://www.npmjs.com/package/treeshakable"><img src="https://img.jsdelivr.com/img.shields.io/npm/d18m/treeshakable.svg" alt="Downloads"></a> <img src="https://img.shields.io/bundlephobia/minzip/treeshakable" alt="npm bundle size"> <a href="https://gitpod.io/from-referrer/"><img src="https://img.shields.io/badge/Gitpod-ready--to--code-blue?logo=gitpod" alt="Gitpod ready-to-code"></a></p>
<p><img src="./treeshakable.webp" alt="Treeshakable"></p>
<p>Treeshakable is a comprehensive library designed to unlock the full potential of React 18 server components. It enhances any state management library with full tree-shaking capabilities, ensuring efficient state management and reducing package size by facilitating shared state even when importing components from separate files. Additionally, it improves performance by avoiding redundant state creation steps.</p>
<blockquote>
<p>If you're in need of basic global state management for your library, consider using <a href="https://github.com/react18-tools/react18-global-store">&quot;React18 Global Store&quot;</a>, as its smaller npm bundle size <img src="https://img.shields.io/bundlephobia/minzip/r18gs" alt="npm bundle size"> will lead to improved performance and reduced overall bundle size.</p>
</blockquote>
<h2 id="why-treeshakable" class="tsd-anchor-link">Why Treeshakable?<a href="#why-treeshakable" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2><p>In modern JavaScript applications, especially those using React, tree-shaking is a crucial optimization technique. Tree-shaking helps eliminate dead code, reducing the overall bundle size and improving load times. However, when importing components from separate files, state management libraries can create separate stores, leading to redundancy and increased package size. Additionally, the creation of multiple stores can break the functionality of the library, as different components or hooks imported from different files end up interacting with isolated stores. This issue is particularly prevalent with libraries built using Zustand and similar libraries.</p>
<p>Without Treeshakable:</p>
<ul>
<li>Importing components from different files may lead to multiple instances of the same store.</li>
<li>This redundancy increases package size and memory usage.</li>
<li>It can degrade performance due to unnecessary state management overhead.</li>
<li>Importing components from different files may break functionality that depends on a central global store.</li>
</ul>
<p>Treeshakable addresses these challenges by ensuring a single shared state across different imports, optimizing tree-shaking, and reducing overall package size.</p>
<p>For a live example demonstrating these concerns see the <a href="https://treeshakable.vercel.app/">official website</a></p>
<p>✅ Universal Compatibility: Works with various state management libraries.</p>
<p>✅ Tree-Shaking Optimization: Enables full tree-shaking for efficient code splitting and reduced package size.</p>
<p>✅ Shared State Management: Facilitates shared state across different imports, preventing the creation of multiple stores.</p>
<p>✅ Create fully Treeshakable (import from <code>treeshakable/client/loader-container</code>)</p>
<p>✅ Fully TypeScript Supported</p>
<p>✅ Leverage the power of React 18 Server components</p>
<p>✅ Compatible with all React 18 build systems/tools/frameworks</p>
<p>✅ Documented with <a href="https://react18-tools.github.io/treeshakable">Typedoc</a> (<a href="https://react18-tools.github.io/treeshakable">Docs</a>)</p>
<p>✅ Examples for Next.js, Vite, and Remix</p>
<blockquote>
<p><img src="https://github.com/react18-tools/treeshakable/blob/main/popper.png?raw=true" style="height: 20px"/> Please consider starring <a href="https://github.com/react18-tools/treeshakable">this repository</a> and sharing it with your friends.</p>
</blockquote>
<h2 id="getting-started" class="tsd-anchor-link">Getting Started<a href="#getting-started" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2><h3 id="installation" class="tsd-anchor-link">Installation<a href="#installation" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><pre><code class="bash"><span class="hl-0">$</span><span class="hl-1"> </span><span class="hl-2">pnpm</span><span class="hl-1"> </span><span class="hl-2">add</span><span class="hl-1"> </span><span class="hl-2">treeshakable</span>
</code><button type="button">Copy</button></pre>

<p><strong><em>or</em></strong></p>
<pre><code class="bash"><span class="hl-0">$</span><span class="hl-1"> </span><span class="hl-2">npm</span><span class="hl-1"> </span><span class="hl-2">install</span><span class="hl-1"> </span><span class="hl-2">treeshakable</span>
</code><button type="button">Copy</button></pre>

<p><strong><em>or</em></strong></p>
<pre><code class="bash"><span class="hl-0">$</span><span class="hl-1"> </span><span class="hl-2">yarn</span><span class="hl-1"> </span><span class="hl-2">add</span><span class="hl-1"> </span><span class="hl-2">treeshakable</span>
</code><button type="button">Copy</button></pre>

<h3 id="usage" class="tsd-anchor-link">Usage<a href="#usage" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><p>Here is a basic example of how to use Treeshakable with a state management library:</p>
<pre><code class="tsx"><span class="hl-3">import</span><span class="hl-1"> </span><span class="hl-4">treeshakable</span><span class="hl-1"> </span><span class="hl-3">from</span><span class="hl-1"> </span><span class="hl-2">&quot;treeshakable&quot;</span><span class="hl-1">;</span><br/><span class="hl-3">import</span><span class="hl-1"> { </span><span class="hl-4">create</span><span class="hl-1"> } </span><span class="hl-3">from</span><span class="hl-1"> </span><span class="hl-2">&quot;zustand&quot;</span><span class="hl-1">;</span><br/><br/><span class="hl-5">interface</span><span class="hl-1"> </span><span class="hl-6">CounterState</span><span class="hl-1"> {</span><br/><span class="hl-1">  </span><span class="hl-4">count</span><span class="hl-1">: </span><span class="hl-6">number</span><span class="hl-1">;</span><br/><span class="hl-1">  </span><span class="hl-0">setCount</span><span class="hl-1">: (</span><span class="hl-4">count</span><span class="hl-1">: </span><span class="hl-6">number</span><span class="hl-1">) </span><span class="hl-5">=&gt;</span><span class="hl-1"> </span><span class="hl-6">void</span><span class="hl-1">;</span><br/><span class="hl-1">}</span><br/><br/><span class="hl-3">export</span><span class="hl-1"> </span><span class="hl-5">const</span><span class="hl-1"> </span><span class="hl-7">useTreeshakableCounterStore</span><span class="hl-1"> = </span><span class="hl-0">treeshakable</span><span class="hl-1">(</span><span class="hl-2">&quot;counter-store&quot;</span><span class="hl-1">, () </span><span class="hl-5">=&gt;</span><br/><span class="hl-1">  </span><span class="hl-0">create</span><span class="hl-1">&lt;</span><span class="hl-6">CounterState</span><span class="hl-1">&gt;(</span><span class="hl-4">set</span><span class="hl-1"> </span><span class="hl-5">=&gt;</span><span class="hl-1"> ({</span><br/><span class="hl-1">    </span><span class="hl-4">count:</span><span class="hl-1"> </span><span class="hl-8">0</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-0">setCount</span><span class="hl-4">:</span><span class="hl-1"> </span><span class="hl-4">count</span><span class="hl-1"> </span><span class="hl-5">=&gt;</span><span class="hl-1"> </span><span class="hl-0">set</span><span class="hl-1">({ </span><span class="hl-4">count</span><span class="hl-1"> }),</span><br/><span class="hl-1">  })),</span><br/><span class="hl-1">);</span>
</code><button type="button">Copy</button></pre>

<p>In this example, Treeshakable is applied as a higher-order function to enhance the Zustand store with tree-shaking capabilities.</p>
<h3 id="why-use-treeshakablemy-store---createstore-and-not-treeshakablemy-store-createstore" class="tsd-anchor-link">Why use <code>treeshakable('my-store', () =&gt; createStore(...))</code> and not <code>treeshakable('my-store', createStore(...))</code>?<a href="#why-use-treeshakablemy-store---createstore-and-not-treeshakablemy-store-createstore" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><p>The distinction here is critical:</p>
<ul>
<li><strong><code>treeshakable('my-store', createStore(...))</code></strong> would immediately invoke <code>createStore</code> and create the store instance during module initialization. This approach can defeat the purpose of tree-shaking because the store would be created regardless of whether it is used or not.</li>
<li><strong><code>treeshakable('my-store', () =&gt; createStore(...))</code></strong> passes a function that returns the store instance. This approach ensures the store creation happens only once, optimizing performance and reducing bundle size through lazy initialization.</li>
</ul>
<p>For detailed API and options, refer to <a href="https://react18-tools.github.io/treeshakable">the API documentation</a>.</p>
<h2 id="motivation" class="tsd-anchor-link">Motivation<a href="#motivation" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2><p>I developed Treeshakable after encountering issues with importing from specific folders for better tree-shaking, which resulted in the creation of separate Zustand stores and increased package size. Treeshakable addresses this by ensuring shared state across different imports, optimizing tree-shaking, and reducing overall package size.</p>
<p><img src="https://repobeats.axiom.co/api/embed/c48bd4105676d990159fd3f80896d179b39254b9.svg" alt="Repo Stats" title="Repobeats analytics image"></p>
<h2 id="license" class="tsd-anchor-link">License<a href="#license" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2><p>This library is licensed under the MPL-2.0 open-source license.</p>
<blockquote>
<p><img src="https://github.com/react18-tools/treeshakable/blob/main/popper.png?raw=true" style="height: 20px"/> Please consider enrolling in <a href="https://mayank-chaudhari.vercel.app/courses">our courses</a> or <a href="https://github.com/sponsors/mayank1513">sponsoring</a> our work.</p>
</blockquote>
<hr />
<p align="center" style="text-align:center">with 💖 by <a href="https://mayank-chaudhari.vercel.app" target="_blank">Mayank Kumar Chaudhari</a></p></div></div><div class="col-sidebar"><div class="page-menu"><div class="tsd-navigation settings"><details class="tsd-accordion"><summary class="tsd-accordion-summary"><svg width="20" height="20" viewBox="0 0 24 24" fill="none" aria-hidden="true"><use href="assets/icons.svg#icon-chevronDown"></use></svg><h3>Settings</h3></summary><div class="tsd-accordion-details"><div class="tsd-filter-visibility"><span class="settings-label">Member Visibility</span><ul id="tsd-filter-options"><li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-protected" name="protected"/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>Protected</span></label></li><li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-inherited" name="inherited" checked/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>Inherited</span></label></li></ul></div><div class="tsd-theme-toggle"><label class="settings-label" for="tsd-theme">Theme</label><select id="tsd-theme"><option value="os">OS</option><option value="light">Light</option><option value="dark">Dark</option></select></div></div></details></div><details open class="tsd-accordion tsd-page-navigation"><summary class="tsd-accordion-summary"><svg width="20" height="20" viewBox="0 0 24 24" fill="none" aria-hidden="true"><use href="assets/icons.svg#icon-chevronDown"></use></svg><h3>On This Page</h3></summary><div class="tsd-accordion-details"><a href="#treeshakable-"><span>Treeshakable &lt;img src=&quot;https://github.com/react18-<wbr/>tools/treeshakable/blob/main/popper.png?raw=true&quot; style=&quot;height: 40px&quot;/&gt;</span></a><ul><li><a href="#why-treeshakable"><span>Why <wbr/>Treeshakable?</span></a></li><li><a href="#getting-started"><span>Getting <wbr/>Started</span></a></li><li><ul><li><a href="#installation"><span>Installation</span></a></li><li><a href="#usage"><span>Usage</span></a></li><li><a href="#why-use-treeshakablemy-store---createstore-and-not-treeshakablemy-store-createstore"><span>Why use treeshakable(&#39;my-<wbr/>store&#39;, () =&gt; create<wbr/>Store(...)) and not treeshakable(&#39;my-<wbr/>store&#39;, create<wbr/>Store(...))?</span></a></li></ul></li><li><a href="#motivation"><span>Motivation</span></a></li><li><a href="#license"><span>License</span></a></li></ul></div></details></div><div class="site-menu"><nav class="tsd-navigation"><a href="modules.html">React18 Loaders</a><ul class="tsd-small-nested-navigation" id="tsd-nav-container"><li>Loading...</li></ul></nav></div></div></div><footer><p class="tsd-generator">Generated using <a href="https://typedoc.org/" target="_blank">TypeDoc</a></p></footer><div class="overlay"></div></body></html>
